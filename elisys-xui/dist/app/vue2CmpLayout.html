<xui-factory version="1.0">


    <!--------------------------  XUI-FLOW   ------------------------------->
    <xui-doc xid="xui-flow">
        <xui-prop id="name">Flow</xui-prop>
        <xui-prop id="icon">mdi-transfer-right</xui-prop>
        <xui-prop id="desc">Flows</xui-prop>
        <xui-prop id="componentAs">container</xui-prop>
        <xui-prop var="nb" def="2" editor="int">nb slot</xui-prop>
       
    </xui-doc>

    <xui-doc xid="xui-no-dom:xui-flow">
        <xui-prop id="name">Flow item</xui-prop>
        <xui-prop id="desc">Un Slot</xui-prop>
        <xui-prop id="add-remove">incNb</xui-prop>
    </xui-doc>

    <xui-slot xid="xui-flow" xui-for="idxf" xui-slot-name="Flow">
        <xui-slot style-slot="display:inline-flex" xid="[[parent-xid]]-col-[[idxf@2]]" xui-slot-name="Flow [[idxf@2]]">
        </xui-slot>
    </xui-slot>

    <!--------------------------  XUI-BLOCK   ------------------------------->
    <xui-doc xid="xui-block">
        <xui-prop id="name">Block</xui-prop>
        <xui-prop id="icon">mdi-checkbox-blank-outline</xui-prop>
        <xui-prop id="desc">Un block</xui-prop>
        <xui-prop id="componentAs">container</xui-prop>
        <xui-prop id="favorite">listitem</xui-prop>
        <xui-prop id="exclude">container</xui-prop>

        <xui-prop var="class" cat="class" editor="class">class</xui-prop>
        <xui-prop var="style" cat="style" editor="style">style</xui-prop>
    </xui-doc>

    <div xid="xui-block" class="[[class]]" -style="[[style]]">
        <xui-slot style-slot="height:100%" xid="[[parent-xid]]-block" xui-slot-name="Block"></xui-slot>
    </div>

    <!--------------------------  XUI-ROUTE-template ------------------------------->
    <xui-doc xid="template:xui-route-template">
        <xui-prop id="name">Router</xui-prop>
        <xui-prop id="icon">mdi-view-day</xui-prop>
        <xui-prop id="desc">Une session</xui-prop>
        <xui-prop id="componentAs">container</xui-prop>
    </xui-doc>


    <template xid="xui-route-template" xui-for="idxroute" xui-no-dom>
        <template xui-doc-id="xui-route-template-item" id="[[parent-xid]]-route-[[idxroute@0+]]" xid="[[parent-xid]]-route-[[idxroute@0+]]">
            <xui-slot xui-reloader=true xui-slot-full xid="[[parent-xid]]-content"  xui-slot-name="route [[idxroute@0+]]">
            </xui-slot>
        </template>
    </template>

    <!--------------------------  XUI-SESSION   ------------------------------->
    <xui-doc xid="xui-session">
        <xui-prop id="name">Sessions</xui-prop>
        <xui-prop id="icon">mdi-view-day</xui-prop>
        <xui-prop id="desc">Une session</xui-prop>
        <xui-prop id="componentAs">container</xui-prop>

        <xui-prop var="nb" def="3" editor="int">nb de session</xui-prop>
        <xui-prop var="class" cat="class" editor="class">class</xui-prop>
        <xui-prop var="style" cat="style" editor="style">style</xui-prop>
    </xui-doc>

    <xui-doc xid="session:xui-slot">
        <xui-prop id="name">Session item</xui-prop>
        <xui-prop id="desc">Une session item</xui-prop>
        <xui-prop var="class" cat="class" editor="class">class</xui-prop>
        <xui-prop var="style" cat="style" editor="style">style</xui-prop>
    </xui-doc>

    <div xid="xui-session" class="[[class]]" -style="[[style]];flex: 1 0 auto" xui-for="idxr">
        <xui-slot xui-reloader=true xid="[[parent-xid]]-session-[[idxr@0+]]"  xui-slot-name="session">
            <session class="xui-session [[class@-1]]" -style="[[style@-1]]">
                <xui-slot xui-slot-full xid="[[parent-xid]]-item" xui-slot-name="session [[idxr@0+]]"></xui-slot>
            </session>
        </xui-slot>
    </div>

    <xui-design xid="inject-style">
        <style xui-no-dom>
            .xui-session {
                display: block;
            }
        </style>
    </xui-design>


    <!-------------------------------  SPLIT 1  ------------------------------->

    <xui-doc xid="xui-split-1">
        <xui-prop id="name">Split</xui-prop>
        <xui-prop id="icon">mdi-arrow-split-vertical</xui-prop>
        <xui-prop id="desc">Un split</xui-prop>
        <xui-prop id="componentAs">container</xui-prop>

        <xui-prop var="column" editor="bool">column</xui-prop>
        <xui-prop var="sizeA" def="1fr" editor="text">size A (px, fr, %)</xui-prop>
        <xui-prop var="sizeB" def="1fr" editor="text">size B (px, fr, %)</xui-prop>

        <xui-prop var="class" cat="class" editor="class">class</xui-prop>
        <xui-prop var="style" cat="style" editor="style">style</xui-prop>
    </xui-doc>

    <xui-doc xid="template:xui-split-1">
        <xui-prop id="name">Split Cell</xui-prop>
        <xui-prop id="desc">Contenu du split</xui-prop>
        <xui-prop id="favorite">container</xui-prop>
        <xui-prop var="class" cat="class" editor="class">class</xui-prop>
        <xui-prop var="style" cat="style" editor="style">style</xui-prop>
    </xui-doc>

    <v-xui-split xid="xui-split-1" column="[[column@0]]" sizea="[[sizeA@0]]" sizeb="[[sizeB@0]]" class="[[class@0]]"
        -style="[[style@0]]">
        <template v-slot:a>
            <xui-slot xid="[[parent-xid]]-splitA" xui-slot-name="split A" class="[[class@1]]" -style="[[style@1]]"
                xui-slot-full xui-reloader=true></xui-slot>
        </template>
        <template v-slot:b>
            <xui-slot xid="[[parent-xid]]-splitB" xui-slot-name="split B" class="[[class@1]]" -style="[[style@1]]"
                xui-slot-full xui-reloader=true></xui-slot>
        </template>
    </v-xui-split>


    <!-------------------------------------  V-XUI-SPLIT  ------------------------------------->
    <xui-design xid="inject-other-header">
        <script defer src="https://unpkg.com/split-grid/dist/split-grid.js"></script>
    </xui-design>
    
    <xui-design xid="xui-script-data">
        <script xui-no-dom>
            $xui.initComponentVuejs.push(() => { //register VueComponent from XUI File
                new vue2CmpMgr.ComponentManager().registerVueComponent("v-xui-split", 'app/vue2CmpLayout.html',
                    "vue-xui-split");
            }
            );
        </script>
    </xui-design>

    <script xid="vue-xui-split" xui-no-dom>
        export default {
            template: <template-xui-split xui-convert-json></template-xui-split>,
            props: ["column", "sizea", "sizeb"],
            mounted: function () {
                var sizeA = this.sizea == undefined ? "1fr" : this.sizea;
                var sizeB = this.sizeb == undefined ? "1fr" : this.sizeb;

                var split = this.$el;
                var gutter = split.querySelector(':scope>.xui-split-gutter');

                if (this.column == undefined) {
                    split.style.gridTemplateRows = sizeA + " 5px " + sizeB;
                    gutter.classList.add("xui-split-gutter-horizontal");
                    Split({
                        rowGutters: [{
                            track: 1,
                            element: gutter
                        }]
                    })
                }
                else {
                    split.style.gridTemplateColumns = sizeA + " 5px " + sizeB;
                    gutter.classList.add("xui-split-gutter-vertical");
                    Split({
                        columnGutters: [{
                            track: 1,
                            element: gutter
                        }]
                    })
                }
            }
        }
    </script>

    <div xid="template-xui-split" class="xui-split">
        <div>
            <slot name="a"></slot>
        </div>
        <div class="xui-split-gutter"></div>
        <div>
            <slot name="b"></slot>
        </div>
    </div>

    <xui-design xid="inject-style">
        <style xui-no-dom>
            .xui-split {
                display: grid;
                height: 100%;
            }

            .xui-split-gutter {
                background-color: #c7c7c7
            }

            .xui-split-gutter-horizontal {
                cursor: row-resize;
            }

            .xui-split-gutter-vertical {
                cursor: col-resize;
            }
        </style>
    </xui-design>

</xui-factory>