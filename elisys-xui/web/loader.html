<html style="height:100vh;">

<body style="height:100vh; margin: 0px;">
    <iframe id='rootFrame' frameborder="0" width="100%" height="100%" style='height: 100vh; width: 100vw;'>
    </iframe>
</body>

<script defer src="libxui.dart.js"></script>

<script type="module">

    if (typeof window.$xui === 'undefined')
        window.$xui = {};

    const urlParams = new URLSearchParams(window.location.search);
    window.$xui.frameName = urlParams.get("id");

    import("./app/clsPageDesignManager.js").then((module) => {
        $xui.pageDesignManager = new module.PageDesignManager();

        $xui.pageDesignManager.waitForXuiLib("initPageXUI", function () {
            var infoFile = $xui.pageDesignManager.getInfoFile("final");
            $xui.initPageXUI(infoFile);
        });
    });

    // lancer par le initPageXUI
    $xui.loadPageJS = (html) => {
        document.querySelector("#rootFrame").srcdoc = html;
    };

</script>

</html>